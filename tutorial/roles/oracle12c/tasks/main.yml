---
# https://docs.ansible.com/ansible/latest/modules/yum_module.html
# https://www.tecmint.com/install-oracle-database-12c-on-centos-7/
- name: Oracle 12c required packages
  yum: 
    name:  "{{ packages }}"
  vars:
    packages:
    - binutils.x86_64
    - compat-libcap1.x86_64
    - gcc.x86_64
    - gcc-c++.x86_64
    - glibc.i686
    - glibc.x86_64
    - glibc-devel.i686
    - glibc-devel.x86_64
    - ksh
    - compat-libstdc++-33
    - libaio.i686
    - libaio.x86_64
    - libaio-devel.i686
    - libaio-devel.x86_64
    - libgcc.i686
    - libgcc.x86_64
    - libstdc++.i686
    - libstdc++.x86_64
    - libstdc++-devel.i686
    - libstdc++-devel.x86_64
    - libXi.i686 
    - libXi.x86_64
    - libXtst.i686
    - libXtst.x86_64
    - make.x86_64
    - sysstat.x86_64
    - zip
    - unzip

# https://docs.ansible.com/ansible/latest/user_guide/playbooks_loops.html
- name: Oracle 12c required groups
  group:
    name:  "{{ item }}"
    state: present
  loop:
    - oinstall
    - dba

- name: Oracle 12c required install account
  user:
    name: oracle
    group: oinstall
    groups: dba
  notify:
    - set-passord-oracle
    
# https://docs.ansible.com/ansible/latest/modules/copy_module.html#copy-module
- name: Oracle 12c install account bashrc file
  copy:
    src: ../../files/bashrc.sh
    dest: /home/oracle/.bashrc
    owner: oracle
    group: oinstall
    mode: u=rw,g=r,o=r

