---
- name: Create response file for silent installation
  template: 
    dest:  "{{ oracle.media.installer }}/dbca.rsp"
    src:   dbca.rsp
    owner: "{{ oracle.user }}"
    group: "{{ oracle.groups.inventory }}"
    mode:  u=rw,g=r,o=r

- name: Create Oracle Database {{ oracle.sid }} in {{ oracle_database.data }}
  command:     "{{ oracle.home }}/bin/dbca -silent -responseFile {{ oracle.media.installer }}/dbca.rsp"
  become:       true
  become_user:  "{{ oracle.user }}"
  args:
    creates:    "{{ oracle_database.data }}"

- name: Copy server tnsames.ora to local for later use on Documentum servers
  fetch: 
    dest:  "{{ tmp_dir }}/tnsnames.ora"
    src:   "{{ oracle.home }}/network/admin/tnsnames.ora"
    flat: yes
